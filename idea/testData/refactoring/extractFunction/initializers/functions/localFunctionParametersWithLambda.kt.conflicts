Cannot generate function with erroneous return type